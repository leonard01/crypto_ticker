<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title></title> <!-- ✅ Blank title -->
    <style>
      html, body {
        margin: 0;
        padding: 0;
        background: transparent;      /* ✅ Fully transparent background */
        color: #ffffff;
        font-family: Arial, sans-serif;
        font-size: 16px;
        -webkit-user-select: none;
        -webkit-app-region: drag;     /* ✅ Whole widget is draggable */
      }

      #ticker {
        margin: 10px;
      }

      .coin {
        margin: 6px 0;
      }

      .up {
        color: #00ff00;
      }

      .down {
        color: #ff0000;
      }
    </style>
  </head>
  <body>
    <div id="ticker">Loading...</div>

    <script>
      async function loadPrices() {
        const tickerDiv = document.getElementById("ticker");
        tickerDiv.innerHTML = "Loading...";
        try {
          const prices = await window.electronAPI.fetchPrices();
          tickerDiv.innerHTML = prices.map(ticker => {
            const coinName = ticker.symbol.replace("USDT", "");
            const price = `$${parseFloat(ticker.lastPrice).toLocaleString()}`;
            const change = parseFloat(ticker.priceChangePercent).toFixed(2);
            const arrow = change >= 0 ? "▲" : "▼";
            const colorClass = change >= 0 ? "up" : "down";

            return `
              <div class="coin">
                <strong>${coinName}</strong>: ${price}
                <span class="${colorClass}">
                  ${arrow} ${change}%
                </span>
              </div>
            `;
          }).join('');
        } catch (err) {
          tickerDiv.innerHTML = "<span style='color:red'>Error loading prices</span>";
        }
      }

      loadPrices();
      setInterval(loadPrices, 5000);
    </script>
  </body>
</html>
